# Set TabKeep as Your Browser's Default Search Engine

## üîç Overview

TabKeep is now a fully functional AI-powered search engine that can be set as your browser's default search. Every search will:
1. **Fetch real web results** from Brave Search API
2. **Generate AI summary** with OpenAI
3. **Show traditional search results** below the AI answer
4. **Include news** when relevant

## üöÄ Setup

### Step 1: Get API Keys

**Brave Search API (Required for web results):**
1. Go to https://brave.com/search/api/
2. Sign up for free (2,000 queries/month)
3. Get your API key

**OpenAI API (Required for AI answers):**
1. Go to https://platform.openai.com/api-keys
2. Create a new API key

### Step 2: Add to .env.local

Edit `midnight-canvas-280c088a/.env.local`:

```bash
# Required
BRAVE_SEARCH_API_KEY=BSAxxx...
VITE_OPENAI_API_KEY=sk-proj-...

# Existing keys (keep these)
VITE_SUPABASE_URL=...
VITE_SUPABASE_ANON_KEY=...
# ... rest of your config
```

### Step 3: Start Servers

**Terminal 1 - API Server:**
```bash
node dev-api-server.js
```

**Terminal 2 - Frontend:**
```bash
cd midnight-canvas-280c088a
npm run dev
```

## üåê Add to Browser

### Chrome / Brave / Edge

1. **Open Settings**
   - Go to `chrome://settings/searchEngines` (Chrome)
   - Or `brave://settings/searchEngines` (Brave)
   - Or `edge://settings/searchEngines` (Edge)

2. **Click "Add"** next to "Site search"

3. **Fill in the form:**
   - **Search engine:** TabKeep AI Search
   - **Shortcut:** tabkeep (or just 't')
   - **URL:** `http://localhost:5173/?q=%s`

4. **Click "Add"**

5. **Make it default (optional):**
   - Click the three dots next to "TabKeep AI Search"
   - Click "Make default"

### Firefox

1. **Visit http://localhost:5173**

2. **Right-click the address bar**

3. **Click "Add TabKeep AI Search"**

4. **Go to Settings > Search**

5. **Select "TabKeep AI Search" as default**

### Safari

Safari requires browser extensions for custom search engines. Use shortcuts instead:

1. Open Safari Settings > Search
2. In the address bar, type `localhost:5173/?q=your search`
3. Use bookmarks/favorites for quick access

## üí° How to Use

### From Browser Address Bar

**Chrome/Brave/Edge:**
- Just type your search and press Enter (if set as default)
- Or type `t` + Tab, then your search

**Firefox:**
- Click the search engine icon in address bar
- Select TabKeep AI Search

### Direct URL

Visit: `http://localhost:5173/?q=your+search+here`

## ‚ú® Features

### AI Answer + Web Results
Every search shows:
1. **AI Summary** - Generated by GPT-4 with sources
2. **Top Stories** - News results (when relevant)
3. **Web Results** - Traditional search results from Brave

### Search Modes
Click the ‚ö° icon to switch:
- **Speed** ‚ö° - Fast, uses GPT-4o-mini
- **Balanced** ‚öñÔ∏è - Default, good for most searches
- **Quality** ‚≠ê - Deep research, uses GPT-4o

### File Uploads
Click üìé to upload documents and ask questions about them.

## üåç Production Deployment

To use this as your actual search engine (not localhost):

### Option 1: Deploy to Vercel

```bash
# Install Vercel CLI
npm i -g vercel

# Deploy
vercel --prod

# Get your URL (e.g., tabkeep.vercel.app)
```

Then use `https://your-app.vercel.app/?q=%s` as search URL.

### Option 2: Deploy to Your Domain

1. Deploy to any hosting (Netlify, Cloudflare Pages, etc.)
2. Get your domain (e.g., `search.yourdomain.com`)
3. Use `https://search.yourdomain.com/?q=%s` as search URL
4. Update `opensearch.xml` with your domain

### Update OpenSearch for Production

Edit `midnight-canvas-280c088a/public/opensearch.xml`:

```xml
<Url type="text/html" template="https://your-domain.com/?q={searchTerms}"/>
<Image width="16" height="16">https://your-domain.com/favicon.ico</Image>
```

## üîí Privacy

**Your searches are:**
- ‚úÖ Sent to Brave Search API (privacy-focused)
- ‚úÖ Sent to OpenAI for AI answers
- ‚úÖ Not logged or stored by TabKeep (unless you save chat history)

**Data flow:**
```
Your Browser ‚Üí TabKeep Server ‚Üí Brave API + OpenAI ‚Üí Back to You
```

## üí∞ Costs

**Free Tier:**
- Brave Search: 2,000 searches/month
- OpenAI: Pay per use (~$0.01-0.03 per search)

**Estimated monthly cost for personal use:**
- ~$5-15/month for OpenAI (assuming 500 searches)
- Brave: Free up to 2,000 searches

**To reduce costs:**
- Use Speed mode (cheaper, faster)
- Don't upload large files
- Use traditional search without AI when you don't need it

## üõ†Ô∏è Customization

### Change Default Mode

Edit `src/contexts/PerplexicaChatContext.tsx`:

```typescript
const [optimizationMode, setOptimizationMode] = useState<OptimizationMode>('speed'); // Change to 'speed', 'balanced', or 'quality'
```

### Adjust Result Count

Edit `src/contexts/PerplexicaChatContext.tsx`:

```typescript
body: JSON.stringify({ query: content, count: 15 }), // Change 10 to any number
```

### Change AI Model

Edit `api/perplexica/chat.js`:

```javascript
function getModelConfig(mode) {
  switch (mode) {
    case 'speed':
      return { model: 'gpt-4o-mini', temperature: 0.3 };
    case 'quality':
      return { model: 'gpt-4o', temperature: 0.7 }; // Try 'gpt-4-turbo'
    // ...
  }
}
```

## üêõ Troubleshooting

**Q: "Mock results" showing instead of real results**
A: Add `BRAVE_SEARCH_API_KEY` to `.env.local` and restart server

**Q: No AI answers, just search results**
A: Add `VITE_OPENAI_API_KEY` to `.env.local` and restart server

**Q: Browser doesn't let me add custom search**
A: Some browsers restrict localhost. Deploy to a real domain or use browser-specific methods.

**Q: Searches are slow**
A: Switch to Speed mode, or use Balanced without file uploads

**Q: Want to use Google instead of Brave?**
A: Replace Brave API in `api/perplexica/brave-search.js` with Google Custom Search API

## üéØ Next Steps

1. **Deploy to production** for use outside localhost
2. **Add search suggestions** as you type
3. **Save search history** to your account
4. **Add image search** results
5. **Create browser extension** for easier access

Enjoy your new AI-powered search engine! üéâ
